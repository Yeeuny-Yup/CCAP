<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CCAP — Multimodal Speech Enhancement (Audio + Spectrogram Demos)</title>

  <!-- Optional: nicer font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0b1020;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.09);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.66);
      --line: rgba(255,255,255,0.12);
      --accent: #7c5cff;
      --accent2:#19c37d;
      --warn:#ffcc66;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 18px;

      --cellW: 260px;       /* cell width */
      --specH: 160px;       /* spectrogram height (ALL equal) */
      --audioH: 36px;
    }

    *{ box-sizing: border-box; }
    body{
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 800px at 10% 0%, rgba(124,92,255,0.30), transparent 60%),
        radial-gradient(900px 700px at 100% 20%, rgba(25,195,125,0.16), transparent 55%),
        radial-gradient(700px 600px at 60% 110%, rgba(255,204,102,0.14), transparent 55%),
        var(--bg);
    }

    a{ color: inherit; }
    .container{
      /* max-width: 1240px; */
      max-width: 1600px;
      margin: 0 auto;
      padding: 28px 20px 80px;
    }

    /* Top bar */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(12px);
      background: linear-gradient(to bottom, rgba(11,16,32,0.88), rgba(11,16,32,0.55));
      border-bottom: 1px solid var(--line);
    }
    .topbar-inner{
      max-width: 1240px;
      margin: 0 auto;
      padding: 14px 20px;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }
    .brand{
      display:flex; flex-direction: column; gap: 4px;
    }
    .brand .title{
      font-size: 14px;
      letter-spacing: 0.2px;
      font-weight: 700;
    }
    .brand .subtitle{
      font-size: 12px;
      color: var(--muted);
    }
    .navchips{
      display:flex; gap: 8px; flex-wrap: wrap; justify-content: flex-end;
    }
    .chip{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      text-decoration: none;
      transition: 0.15s ease;
      user-select: none;
      white-space: nowrap;
    }
    .chip:hover{
      transform: translateY(-1px);
      border-color: rgba(124,92,255,0.55);
      background: rgba(124,92,255,0.14);
    }

    /* Hero */
    .hero{
      margin-top: 18px;
      border: 1px solid var(--line);
      background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px 22px 18px;
    }
    .hero h1{
      margin: 0 0 10px;
      font-size: 22px;
      line-height: 1.2;
      letter-spacing: -0.3px;
    }
    .hero p{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.7;
      max-width: 980px;
    }
    .meta-row{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }
    .badges{
      display:flex; gap: 8px; flex-wrap: wrap;
    }
    .badge{
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      display:flex; gap: 8px; align-items: center;
    }
    .dot{ width:8px; height:8px; border-radius: 50%; background: var(--accent); display:inline-block;}
    .dot.green{ background: var(--accent2); }
    .dot.warn{ background: var(--warn); }

    .toggles{
      display:flex; gap: 10px; flex-wrap: wrap; align-items:center; justify-content:flex-end;
      color: var(--muted);
      font-size: 12px;
    }
    .toggle{
      display:flex; gap: 8px; align-items:center;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      padding: 8px 10px;
      border-radius: 999px;
      user-select:none;
    }
    .toggle input{ accent-color: var(--accent); }

    /* Sections */
    section{
      margin-top: 26px;
      scroll-margin-top: 78px;
    }
    .section-head{
      display:flex; align-items: flex-end; justify-content: space-between;
      gap: 12px; flex-wrap: wrap;
    }
    .section-head h2{
      margin: 0;
      font-size: 18px;
      letter-spacing: -0.2px;
    }
    .section-head .hint{
      color: var(--muted);
      font-size: 12px;
    }
    .card{
      margin-top: 12px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .card-pad{
      padding: 18px 18px;
    }
    .card-pad p, .card-pad li{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.75;
    }
    .card-pad p + p{ margin-top: 10px; }
    .card-pad ol{
      margin: 10px 0 0 18px;
      padding: 0;
    }
    .card-pad li{ margin: 8px 0; }
    .card-pad a{
      color: rgba(255,255,255,0.90);
      text-decoration: none;
      border-bottom: 1px dashed rgba(255,255,255,0.35);
    }
    .card-pad a:hover{ color: #fff; border-bottom-color: rgba(124,92,255,0.7); }

    /* Table */
    .table-wrap{
      overflow: auto;
      overflow-x: auto;                 /* ✅ 추가 */
      -webkit-overflow-scrolling: touch;
    }


    /* We intentionally DO NOT show thead (column headers) */
    thead{ display:none; }

    table{
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      min-width: 0;
    }

    tbody td{
      border-bottom: 1px solid rgba(255,255,255,0.07);
      padding: 14px 14px;
      vertical-align: top;
      background: rgba(255,255,255,0.02);
    }
    tbody tr:nth-child(4n+1) td,
    tbody tr:nth-child(4n+2) td{
      background: rgba(255,255,255,0.03);
    }
    tbody tr:nth-child(4n+3) td,
    tbody tr:nth-child(4n+4) td{
      background: rgba(255,255,255,0.05);
    }

    /* Sticky first column (Utterance cell) */
    td.sticky{
      position: sticky;
      left: 0;
      z-index: 3;
      background: rgba(18,26,52,0.96);
      border-right: 1px solid rgba(255,255,255,0.10);
      min-width: 100px;
      max-width: 130px;
    }
    .sample-id{
      font-weight: 700;
      font-size: 12px;
      margin-bottom: 6px;
    }
    .sample-sub{
      font-size: 11px;
      color: var(--muted);
      line-height: 1.4;
    }
    /* .rowhint{
      margin-top: 10px;
      font-size: 11px;
      color: rgba(255,255,255,0.55);
      border-top: 1px dashed rgba(255,255,255,0.14);
      padding-top: 10px;
      line-height: 1.5;
    } */

    /* Cell content */
    .cell{
      width: var(--cellW);
      max-width: 100%;
      display:flex;
      flex-direction: column;
      gap: 10px;
      align-items: stretch;
    }

    /* Capsule tag */
    .capline{
      display:flex;
      align-items: center;
      gap: 10px;
      color: rgba(255,255,255,0.78);
      font-size: 12px;
      font-weight: 600;
      letter-spacing: -0.1px;
    }
    .pill{
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      color: rgba(255,255,255,0.70);
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.05);
      padding: 3px 7px;
      border-radius: 999px;
    }

    audio{
      width: 100%;
      height: var(--audioH);
      border-radius: 999px;
      outline: none;
    }

    /* Spectrogram: ALL same size */
    .spec{
      width: 100%;
      height: var(--specH);
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 6px 18px rgba(0,0,0,0.30);
      cursor: zoom-in;
      background: rgba(0,0,0,0.18);
      object-fit: contain; /* keeps full spectrogram visible */
      display: block;
    }

    .filelink{
      font-size: 11px;
      color: rgba(255,255,255,0.65);
      text-decoration: none;
      border-bottom: 1px dashed rgba(255,255,255,0.25);
      padding-bottom: 1px;
      width: fit-content;
    }
    .filelink:hover{ color: rgba(255,255,255,0.90); }

    /* Highlight CCAP cell */
    .highlight{
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(124,92,255,0.55);
      background: rgba(124,92,255,0.08);
    }

    /* Modal */
    .modal{
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.70);
      z-index: 999;
      padding: 22px;
    }
    .modal.open{ display:flex; }
    .modal-inner{
      max-width: min(1100px, 96vw);
      max-height: 90vh;
      background: rgba(15,22,44,0.92);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--shadow);
      display:flex;
      flex-direction: column;
    }
    .modal-bar{
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.12);
      color: var(--muted);
      font-size: 12px;
    }
    .modal-close{
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      transition: 0.15s ease;
      user-select:none;
    }
    .modal-close:hover{ transform: translateY(-1px); border-color: rgba(124,92,255,0.55); }
    .modal-img-wrap{
      padding: 16px;
      overflow:auto;
    }
    .modal-img{
      width: 100%;
      height: auto;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
    }

    footer{
      margin-top: 34px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.7;
    }
    code{
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.10);
      padding: 2px 6px;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="title">CCAP Demo Page</div>
        <div class="subtitle">Audio & spectrogram comparisons (PP / TP / BN / MANU / CCAP)</div>
      </div>
      <div class="navchips" id="navchips"></div>
    </div>
  </div>

  <div class="container">
    <div class="hero">
      <h1>CCAP: Fusion-aware Compression for Multimodal Speech Enhancement</h1>
      <p>
        <b>One-line Summary (EN):</b> Side-by-side qualitative demos (audio + log spectrogram) comparing baseline pruning methods and CCAP on multimodal SE models.
        <br/>
        This page is generated from the uploaded folders under <code>WAV/</code>. If you move <code>index.html</code> into a different folder, update <code>BASE</code> in the script.
      </p>

      <div class="meta-row">
        <div class="badges">
          <div class="badge"><span class="dot"></span> Ours: CCAP</div>
          <div class="badge"><span class="dot green"></span> Models: Attention-based Early Fusion DCCRN [5] / MMINet [6] / LAU-Net [7]</div>
          <div class="badge"><span class="dot warn"></span> Samples: Male, Female</div>
        </div>
        <div class="toggles">
          <label class="toggle">
            <input type="checkbox" id="toggleSpec" checked />
            Show spectrograms
          </label>
          <label class="toggle">
            <input type="checkbox" id="toggleLinks" />
            Show file links
          </label>
        </div>
      </div>
    </div>

    <!-- Introduction -->
    <section id="introduction">
      <div class="section-head">
        <div>
          <h2>Introduction</h2>
          <div class="hint">Qualitative demo page for multimodal speech enhancement + structured pruning</div>
        </div>
      </div>
      <div class="card">
        <div class="card-pad">
          <p>
            This page provides side-by-side comparisons of enhanced outputs from three representative multimodal speech enhancement models:
            Attention-based Early Fusion DCCRN <b>[5]</b>, MMINet <b>[6]</b>, and LAU-Net <b>[7]</b>.
            For each model, we compare CCAP against common structured pruning baselines (PP <b>[1]</b>, TP <b>[2]</b>, BN-slimming <b>[3]</b>, and MANU <b>[4]</b>)
            using paired <i>audio</i> and <i>log-magnitude spectrograms</i>.
          </p>
          <p>
            <b>How to read:</b> “Noisy ACM” and “BCM” are input signals. “Clean ACM” is the ground-truth reference label (AC microphone).
            Other columns are enhanced outputs produced by a pruned model (or corresponding baseline).
          </p>
          <p>
            <b>Layout:</b> Each utterance is displayed in <b>two rows</b> to reduce horizontal scrolling.
            (Top row: Inputs/Label/Ours, Bottom row: Baselines.)
          </p>
        </div>
      </div>
    </section>

    <!-- References -->
    <section id="references">
      <div class="section-head">
        <div>
          <h2>References</h2>
          <div class="hint">Papers referenced by methods and model architectures</div>
        </div>
      </div>
      <div class="card">
        <div class="card-pad">
          <ol>
            <li>[1] J.-Y. Wu, C. Yu, S.-W. Fu, C.-T. Liu, S.-Y. Chien, and Y. Tsao, “Increasing compactness of deep learning based speech enhancement models with parameter pruning and quantization techniques,” <i>IEEE Signal Processing Letters</i>, vol. 26, pp. 1887–1891, 2019.</li>
            <li>[2] P. Molchanov, S. Tyree, T. Karras, T. Aila, and J. Kautz, “Pruning convolutional neural networks for resource efficient inference,” in <i>Proceedings of the International Conference on Learning Representations (ICLR)</i>, 2017. <span style="color:rgba(255,255,255,0.72)">[Online]</span>. Available: <a href="https://openreview.net/forum?id=SJGCiw5gl" target="_blank" rel="noopener">openreview.net/forum?id=SJGCiw5gl</a></li>
            <li>[3] Z. Liu, J. Li, Z. Shen, G. Huang, S. Yan, and C. Zhang, “Learning efficient convolutional networks through network slimming,” in <i>Proceedings of the IEEE International Conference on Computer Vision</i>, 2017, pp. 2736–2744.</li>
            <li>[4] Z. Liu, G. Dou, X. Yuan, C. Zhang, Z. Tan, and M. Jiang, “Modality-aware neuron pruning for unlearning in multimodal large language models,” <i>arXiv preprint</i> arXiv:2502.15910, 2025. <span style="color:rgba(255,255,255,0.72)">[Online]</span>. Available: <a href="https://arxiv.org/abs/2502.15910" target="_blank" rel="noopener">arxiv.org/abs/2502.15910</a></li>
            <li>[5] H. Wang, X. Zhang, and D. Wang, “Attention-based fusion for bone-conducted and air-conducted speech enhancement in the complex domain,” in <i>ICASSP 2022—2022 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</i>. IEEE, 2022, pp. 7757–7761.</li>
            <li>[6] M. Wang, J. Chen, X. Zhang, Z. Huang, and S. Rahardja, “Multimodal speech enhancement with bone-conducted speech in time domain,” <i>Applied Acoustics</i>, vol. 200, p. 109058, 2022.</li>
            <li>[7] Y. Song, Y. Kim, and Y. Chung, “Lightweight speech enhancement model based on harmonic attention and phase estimation with skin-attachable accelerometer,” in <i>Proc. Interspeech</i>, 2025, pp. 66–70.</li>
          </ol>
        </div>
      </div>
    </section>

    <!-- Comparison Table note -->
    <section id="comparison">
      <div class="section-head">
        <div>
          <h2>Comparison Table</h2>
          <div class="hint">Audio + spectrogram (log-scale) comparisons</div>
        </div>
      </div>
      <div class="card">
        <div class="card-pad">
          <p>
            The spectrograms are log-scaled for visualization. All spectrogram thumbnails are rendered with a fixed size for consistent comparison.
            Click a spectrogram image to zoom in.
          </p>
          <p>
            <b>Note:</b> The global column headers are intentionally hidden. Each cell includes a caption (e.g., “WAV · Noisy ACM”, “Spectrogram · Noisy ACM”) for readability.
          </p>
        </div>
      </div>
    </section>

    <div id="sections"></div>

    <footer>
      <div>
        <b>Notes</b><br/>
        • GitHub Pages is case-sensitive: keep <code>.PNG</code> exactly as uploaded.<br/>
        • If any spectrogram is missing, it will hide automatically (fallbacks are used where specified).
      </div>
    </footer>
  </div>

  <!-- Modal for zoom -->
  <div class="modal" id="modal" role="dialog" aria-modal="true">
    <div class="modal-inner">
      <div class="modal-bar">
        <div id="modalCaption">Spectrogram</div>
        <div class="modal-close" id="modalClose">Close</div>
      </div>
      <div class="modal-img-wrap">
        <img class="modal-img" id="modalImg" alt="Zoomed spectrogram" />
      </div>
    </div>
  </div>

  <script>
    /**
     * Put this index.html at repository root:
     *   - BASE should stay "" (empty)
     * If you put index.html inside /WAV, set:
     *   - const BASE = "..";
     */
    const BASE = ""; // "" when index.html is at repo root

    // Folder mapping (matches your uploaded structure)
    const MODELS = [
      { key: "DCCRN",  title: "Attention-based Early Fusion DCCRN", ref: "[5]",  wavDir: "WAV/DCCRN_wav",  specDir: "WAV/DCCRN_spectrogram" },
      { key: "MMINet", title: "MMINet",                               ref: "[6]",  wavDir: "WAV/MMINet_wav", specDir: "WAV/MMINet_spectrogram" },
      { key: "LAU-Net",title: "LAU-Net",                              ref: "[7]",  wavDir: "WAV/LAU-Net_wav",specDir: "WAV/LAU-Net_spectrogram" },
    ];

    // Samples (display name changed, file id stays the same)
    const SAMPLES = [
      { id: "p00_u32", label: "Sample A", display: "Male" },
      { id: "p24_u25", label: "Sample B", display: "Female" },
    ];

    // ✅ DO NOT TOUCH wav/png suffixes (as requested)
    const COLS_TOP = [
      { name: "Noisy ACM",          wavSuffix: "_noisy.wav",  specSuffix: "_noisy.PNG",    specFallback: "_noisy.PNG" },
      { name: "BCM",               wavSuffix: "_bcm.wav",    specSuffix: "_bcm.PNG" },
      { name: "Clean ACM",         wavSuffix: "_clean.wav",  specSuffix: "_acm.PNG",      specFallback: "_noisy.PNG" },
      { name: "CCAP",           wavSuffix: "_CMCASP.wav", specSuffix: "_cmcasp.PNG",   highlight: true },
    ];

    const COLS_BOTTOM = [
      { name: "PP [1]",   wavSuffix: "_PP.wav",   specSuffix: "_pp.PNG" },
      { name: "TP [2]",   wavSuffix: "_TP.wav",   specSuffix: "_tp.PNG" },
      { name: "BN [3]",   wavSuffix: "_BN.wav",   specSuffix: "_bn.PNG" },
      { name: "MANU [4]", wavSuffix: "_MANU.wav", specSuffix: "_manu.PNG" },
    ];
    

    const sectionsEl = document.getElementById("sections");
    const navEl = document.getElementById("navchips");
    const toggleSpec = document.getElementById("toggleSpec");
    const toggleLinks = document.getElementById("toggleLinks");

    // Modal
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const modalCaption = document.getElementById("modalCaption");
    const modalClose = document.getElementById("modalClose");

    function joinPath(...parts){
      const p = parts.filter(Boolean).join("/").replaceAll("//","/");
      return BASE ? `${BASE}/${p}` : p;
    }

    function makeNav(){
      const intro = [
        { text: "Introduction", href: "#introduction" },
        { text: "References", href: "#references" },
        { text: "Comparison", href: "#comparison" },
      ];
      intro.forEach(x => {
        const a = document.createElement("a");
        a.className = "chip";
        a.href = x.href;
        a.textContent = x.text;
        navEl.appendChild(a);
      });

      MODELS.forEach(m => {
        const a = document.createElement("a");
        a.className = "chip";
        a.href = `#${m.key.toLowerCase()}`;
        a.textContent = `${m.key} ${m.ref}`;
        navEl.appendChild(a);
      });
    }

    function createCell(model, sampleId, col){
      const cell = document.createElement("div");
      cell.className = "cell";

      // Caption: WAV
      const capWav = document.createElement("div");
      capWav.className = "capline";
      capWav.innerHTML = `<span class="pill">WAV</span> <span>${col.name}</span>`;
      cell.appendChild(capWav);

      const wavPath = joinPath(model.wavDir, `${sampleId}${col.wavSuffix}`);
      const audio = document.createElement("audio");
      audio.controls = true;
      audio.preload = "none";
      audio.src = wavPath;
      cell.appendChild(audio);

      // Optional link (hidden by default)
      const linkWav = document.createElement("a");
      linkWav.className = "filelink filelink-wav";
      linkWav.href = wavPath;
      linkWav.textContent = "open wav";
      linkWav.target = "_blank";
      linkWav.rel = "noopener";
      linkWav.style.display = "none";
      cell.appendChild(linkWav);

      // Caption: Spectrogram
      const capSpec = document.createElement("div");
      capSpec.className = "capline";
      capSpec.innerHTML = `<span class="pill">Spectrogram</span> <span>${col.name}</span>`;
      cell.appendChild(capSpec);

      // Spectrogram image
      const img = document.createElement("img");
      img.className = "spec";
      img.loading = "lazy";
      img.alt = `${model.key} ${sampleId} ${col.name} spectrogram`;

      const primary = joinPath(model.specDir, `${sampleId}${col.specSuffix}`);
      img.src = primary;

      if (col.specFallback){
        const fallback = joinPath(model.specDir, `${sampleId}${col.specFallback}`);
        img.onerror = () => {
          if (img.src.endsWith(col.specSuffix)){
            img.src = fallback;
          } else {
            img.style.display = "none";
            capSpec.style.display = "none";
          }
        };
      } else {
        img.onerror = () => {
          img.style.display = "none";
          capSpec.style.display = "none";
        };
      }

      img.addEventListener("click", () => {
        modalImg.src = img.src;
        modalCaption.textContent = `${model.title} ${model.ref} · ${sampleId} · ${col.name}`;
        modal.classList.add("open");
      });

      cell.appendChild(img);

      const linkPng = document.createElement("a");
      linkPng.className = "filelink filelink-png";
      linkPng.href = primary;
      linkPng.textContent = "open png";
      linkPng.target = "_blank";
      linkPng.rel = "noopener";
      linkPng.style.display = "none";
      cell.appendChild(linkPng);

      // Highlight CCAP
      if (col.highlight){
        cell.classList.add("highlight");
      }

      return cell;
    }

    function buildModelSection(model){
      const section = document.createElement("section");
      section.id = model.key.toLowerCase();

      const head = document.createElement("div");
      head.className = "section-head";
      head.innerHTML = `
        <div>
          <h2>${model.title} <span style="color:rgba(255,255,255,0.75)">${model.ref}</span></h2>
          <div class="hint">Folder: <code>${model.wavDir}</code> &nbsp; | &nbsp; <code>${model.specDir}</code></div>
        </div>
        <div class="hint">Each utterance is shown in 2 rows (Top: Inputs/Label/Ours, Bottom: Baselines).</div>
      `;
      section.appendChild(head);

      const card = document.createElement("div");
      card.className = "card";

      const wrap = document.createElement("div");
      wrap.className = "table-wrap";

      const table = document.createElement("table");
      const tbody = document.createElement("tbody");

      // For each sample: 2-row layout (top 4 cells, bottom 4 cells)
      SAMPLES.forEach(s => {
        const trTop = document.createElement("tr");
        const trBot = document.createElement("tr");

        // sticky utterance cell spans 2 rows
        const tdSticky = document.createElement("td");
        tdSticky.className = "sticky";
        tdSticky.rowSpan = 2;
        // tdSticky.innerHTML = `
        //   <div class="sample-id">${s.label}</div>
        //   <div class="sample-sub">${s.display}</div>
        //   <div class="rowhint">
        //     <b>Top:</b> Noisy/BCM/Clean/Ours<br/>
        //     <b>Bottom:</b> PP/TP/BN/MANU
        //   </div>
        // `;
        tdSticky.innerHTML = `
          <div class="sample-id">${s.label}</div>
          <div class="sample-sub">${s.display}</div>
        `;
        trTop.appendChild(tdSticky);

        // Top row cells
        COLS_TOP.forEach(c => {
          const td = document.createElement("td");
          td.appendChild(createCell(model, s.id, c));
          trTop.appendChild(td);
        });

        // Bottom row cells
        COLS_BOTTOM.forEach(c => {
          const td = document.createElement("td");
          td.appendChild(createCell(model, s.id, c));
          trBot.appendChild(td);
        });

        tbody.appendChild(trTop);
        tbody.appendChild(trBot);
      });

      table.appendChild(tbody);
      wrap.appendChild(table);
      card.appendChild(wrap);
      section.appendChild(card);

      return section;
    }

    function applyToggles(){
      // spectrogram show/hide
      document.querySelectorAll("img.spec").forEach(img => {
        img.style.display = toggleSpec.checked ? "" : "none";
      });
      // spectrogram captions show/hide together (the second capline)
      document.querySelectorAll(".capline").forEach((el) => {
        // hide only the "Spectrogram" capline when toggleSpec off
        if (el.textContent.trim().toLowerCase().startsWith("spectrogram")) {
          el.style.display = toggleSpec.checked ? "" : "none";
        }
      });

      // links show/hide
      const showLinks = toggleLinks.checked;
      document.querySelectorAll(".filelink").forEach(a => {
        a.style.display = showLinks ? "inline-block" : "none";
      });
    }

    // modal close behaviors
    modalClose.addEventListener("click", () => modal.classList.remove("open"));
    modal.addEventListener("click", (e) => {
      if (e.target === modal) modal.classList.remove("open");
    });
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape") modal.classList.remove("open");
    });

    
    // Init
    makeNav();
    MODELS.forEach(m => sectionsEl.appendChild(buildModelSection(m)));

    toggleSpec.addEventListener("change", applyToggles);
    toggleLinks.addEventListener("change", applyToggles);
    applyToggles();
  </script>
</body>
</html>

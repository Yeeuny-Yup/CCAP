<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CMC-ASP — Multimodal Speech Enhancement (Audio + Spectrogram Demos)</title>

  <!-- Optional: nicer font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0b1020;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.09);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.66);
      --line: rgba(255,255,255,0.12);
      --accent: #7c5cff;
      --accent2:#19c37d;
      --warn:#ffcc66;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 18px;
    }

    *{ box-sizing: border-box; }
    body{
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 800px at 10% 0%, rgba(124,92,255,0.30), transparent 60%),
        radial-gradient(900px 700px at 100% 20%, rgba(25,195,125,0.16), transparent 55%),
        radial-gradient(700px 600px at 60% 110%, rgba(255,204,102,0.14), transparent 55%),
        var(--bg);
    }

    a{ color: inherit; }
    .container{
      max-width: 1240px;
      margin: 0 auto;
      padding: 28px 20px 80px;
    }

    /* Top bar */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(12px);
      background: linear-gradient(to bottom, rgba(11,16,32,0.88), rgba(11,16,32,0.55));
      border-bottom: 1px solid var(--line);
    }
    .topbar-inner{
      max-width: 1240px;
      margin: 0 auto;
      padding: 14px 20px;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }
    .brand{
      display:flex; flex-direction: column; gap: 4px;
    }
    .brand .title{
      font-size: 14px;
      letter-spacing: 0.2px;
      font-weight: 700;
    }
    .brand .subtitle{
      font-size: 12px;
      color: var(--muted);
    }
    .navchips{
      display:flex; gap: 8px; flex-wrap: wrap; justify-content: flex-end;
    }
    .chip{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      text-decoration: none;
      transition: 0.15s ease;
      user-select: none;
      white-space: nowrap;
    }
    .chip:hover{
      transform: translateY(-1px);
      border-color: rgba(124,92,255,0.55);
      background: rgba(124,92,255,0.14);
    }

    /* Hero */
    .hero{
      margin-top: 18px;
      border: 1px solid var(--line);
      background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px 22px 18px;
    }
    .hero h1{
      margin: 0 0 10px;
      font-size: 22px;
      line-height: 1.2;
      letter-spacing: -0.3px;
    }
    .hero p{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.7;
      max-width: 980px;
    }
    .meta-row{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }
    .badges{
      display:flex; gap: 8px; flex-wrap: wrap;
    }
    .badge{
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      display:flex; gap: 8px; align-items: center;
    }
    .dot{ width:8px; height:8px; border-radius: 50%; background: var(--accent); display:inline-block;}
    .dot.green{ background: var(--accent2); }
    .dot.warn{ background: var(--warn); }

    .toggles{
      display:flex; gap: 10px; flex-wrap: wrap; align-items:center; justify-content:flex-end;
      color: var(--muted);
      font-size: 12px;
    }
    .toggle{
      display:flex; gap: 8px; align-items:center;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      padding: 8px 10px;
      border-radius: 999px;
      user-select:none;
    }
    .toggle input{ accent-color: var(--accent); }

    /* Sections */
    section{
      margin-top: 26px;
      scroll-margin-top: 78px; /* for sticky topbar */
    }
    .section-head{
      display:flex; align-items: flex-end; justify-content: space-between;
      gap: 12px; flex-wrap: wrap;
    }
    .section-head h2{
      margin: 0;
      font-size: 18px;
      letter-spacing: -0.2px;
    }
    .section-head .hint{
      color: var(--muted);
      font-size: 12px;
    }
    .card{
      margin-top: 12px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .card-pad{
      padding: 18px 18px;
    }
    .card-pad p, .card-pad li{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.75;
    }
    .card-pad p + p{ margin-top: 10px; }
    .card-pad ol{
      margin: 10px 0 0 18px;
      padding: 0;
    }
    .card-pad li{ margin: 8px 0; }
    .card-pad a{
      color: rgba(255,255,255,0.90);
      text-decoration: none;
      border-bottom: 1px dashed rgba(255,255,255,0.35);
    }
    .card-pad a:hover{ color: #fff; border-bottom-color: rgba(124,92,255,0.7); }

    /* Table */
    .table-wrap{
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }
    table{
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      min-width: 0; /* we use 2-row per sample; avoid forced horizontal scroll */
    }

    /* ===== header: 2 rows ===== */
    thead tr.cols th{
      position: sticky;
      top: 0;
      z-index: 3;
      background: rgba(15,22,44,0.92);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--line);
      font-size: 12px;
      color: var(--muted);
      text-align: left;
      padding: 12px 12px;
      white-space: nowrap;
    }
    thead tr.cols2 th{
      position: sticky;
      top: 38px; /* height of first header row */
      z-index: 2;
      background: rgba(15,22,44,0.92);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--line);
      font-size: 12px;
      color: var(--muted);
      text-align: left;
      padding: 12px 12px;
      white-space: nowrap;
    }

    /* Sticky first column header */
    th.sticky{
      position: sticky;
      left: 0;
      z-index: 4;
      background: rgba(15,22,44,0.96);
      border-right: 1px solid rgba(255,255,255,0.10);
      min-width: 150px;
      max-width: 200px;
      white-space: nowrap;
    }

    tbody td{
      border-bottom: 1px solid rgba(255,255,255,0.07);
      padding: 12px 12px;
      vertical-align: top;
      background: rgba(255,255,255,0.02);
    }
    /* alternate shading by pair (2 rows per sample) */
    tbody tr.pair-even td{
      background: rgba(255,255,255,0.04);
    }

    /* Sticky first column cells */
    td.sticky{
      position: sticky;
      left: 0;
      z-index: 1;
      background: rgba(18,26,52,0.96);
      border-right: 1px solid rgba(255,255,255,0.10);
      min-width: 150px;
      max-width: 200px;
    }
    .sample-id{
      font-weight: 700;
      font-size: 12px;
      margin-bottom: 6px;
      line-height: 1.15;
    }
    .sample-sub{
      font-size: 11px;
      color: var(--muted);
      line-height: 1.4;
    }

    /* Cells */
    .cell{
      display:flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
      width: 230px;              /* force consistent column width */
      max-width: 230px;
    }
    audio{
      width: 230px;
      max-width: 100%;
      border-radius: 999px;
      outline: none;
    }

    /* Spectrogram: unify size across all columns */
    .spec{
      width: 230px;
      height: 120px;             /* fixed height to unify */
      max-width: 100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 6px 18px rgba(0,0,0,0.30);
      cursor: zoom-in;
      background: rgba(0,0,0,0.18);
      object-fit: contain;       /* keep the whole spectrogram visible */
      display: block;
    }

    .filelink{
      font-size: 11px;
      color: rgba(255,255,255,0.65);
      text-decoration: none;
      border-bottom: 1px dashed rgba(255,255,255,0.25);
      padding-bottom: 1px;
    }
    .filelink:hover{ color: rgba(255,255,255,0.90); }

    /* Highlight cell wrapper (no padding; preserve same inner size) */
    .cell.highlight{
      border-radius: 14px;
      outline: 1px solid rgba(124,92,255,0.55);
      background: rgba(124,92,255,0.06);
    }

    /* Modal */
    .modal{
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.70);
      z-index: 999;
      padding: 22px;
    }
    .modal.open{ display:flex; }
    .modal-inner{
      max-width: min(1100px, 96vw);
      max-height: 90vh;
      background: rgba(15,22,44,0.92);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--shadow);
      display:flex;
      flex-direction: column;
    }
    .modal-bar{
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.12);
      color: var(--muted);
      font-size: 12px;
    }
    .modal-close{
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      transition: 0.15s ease;
      user-select:none;
    }
    .modal-close:hover{ transform: translateY(-1px); border-color: rgba(124,92,255,0.55); }
    .modal-img-wrap{
      padding: 16px;
      overflow:auto;
    }
    .modal-img{
      width: 100%;
      height: auto;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
    }

    /* Footer */
    footer{
      margin-top: 34px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.7;
    }
    code{
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.10);
      padding: 2px 6px;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="title">CMC-ASP Demo Page</div>
        <div class="subtitle">Audio & spectrogram comparisons (PP / TP / BN / MANU / CMC-ASP)</div>
      </div>
      <div class="navchips" id="navchips"></div>
    </div>
  </div>

  <div class="container">
    <div class="hero">
      <h1>CMC-ASP: Fusion-aware Compression for Multimodal Speech Enhancement</h1>
      <p>
        <b>One-line Summary (EN):</b> Side-by-side qualitative demos (audio + log spectrogram) comparing baseline pruning methods and CMC-ASP on multimodal SE models.
        <br/>
        This page is generated from the uploaded folders under <code>WAV/</code>. If you move <code>index.html</code> into a different folder, update <code>BASE</code> in the script.
      </p>

      <div class="meta-row">
        <div class="badges">
          <div class="badge"><span class="dot"></span> Ours: CMC-ASP</div>
          <div class="badge"><span class="dot green"></span> Models: DCCRN [5] / MMINet [6] / LAU-Net [7]</div>
          <div class="badge"><span class="dot warn"></span> Samples: Male, Female</div>
        </div>
        <div class="toggles">
          <label class="toggle">
            <input type="checkbox" id="toggleSpec" checked />
            Show spectrograms
          </label>
          <label class="toggle">
            <input type="checkbox" id="toggleLinks" />
            Show file links
          </label>
        </div>
      </div>
    </div>

    <!-- Introduction -->
    <section id="introduction">
      <div class="section-head">
        <div>
          <h2>Introduction</h2>
          <div class="hint">Qualitative demo page for multimodal speech enhancement + structured pruning</div>
        </div>
      </div>
      <div class="card">
        <div class="card-pad">
          <p>
            This page provides side-by-side comparisons of enhanced outputs from three representative multimodal speech enhancement models:
            Attention-based Early Fusion DCCRN <b>[5]</b>, MMINet <b>[6]</b>, and LAU-Net <b>[7]</b>.
            For each model, we compare CMC-ASP against common structured pruning baselines (PP <b>[1]</b>, TP <b>[2]</b>, BN-slimming <b>[3]</b>, and MANU <b>[4]</b>)
            using paired <i>audio</i> and <i>log-magnitude spectrograms</i>.
          </p>
          <p>
            <b>How to read:</b> “Noisy ACM” and “BCM” are input signals. “Clean ACM (Label)” is the ground-truth reference label (AC microphone).
            Other columns are enhanced outputs produced by a pruned model (or corresponding baseline).
          </p>
        </div>
      </div>
    </section>

    <!-- References -->
    <section id="references">
      <div class="section-head">
        <div>
          <h2>References</h2>
          <div class="hint">Papers referenced by methods and model architectures</div>
        </div>
      </div>
      <div class="card">
        <div class="card-pad">
          <ol>
            <li>[1] J.-Y. Wu, C. Yu, S.-W. Fu, C.-T. Liu, S.-Y. Chien, and Y. Tsao, “Increasing compactness of deep learning based speech enhancement models with parameter pruning and quantization techniques,” <i>IEEE Signal Processing Letters</i>, vol. 26, pp. 1887–1891, 2019.</li>
            <li>[2] P. Molchanov, S. Tyree, T. Karras, T. Aila, and J. Kautz, “Pruning convolutional neural networks for resource efficient inference,” in <i>Proceedings of the International Conference on Learning Representations (ICLR)</i>, 2017. <span style="color:rgba(255,255,255,0.72)">[Online]</span>. Available: <a href="https://openreview.net/forum?id=SJGCiw5gl" target="_blank" rel="noopener">openreview.net/forum?id=SJGCiw5gl</a></li>
            <li>[3] Z. Liu, J. Li, Z. Shen, G. Huang, S. Yan, and C. Zhang, “Learning efficient convolutional networks through network slimming,” in <i>Proceedings of the IEEE International Conference on Computer Vision</i>, 2017, pp. 2736–2744.</li>
            <li>[4] Z. Liu, G. Dou, X. Yuan, C. Zhang, Z. Tan, and M. Jiang, “Modality-aware neuron pruning for unlearning in multimodal large language models,” <i>arXiv preprint</i> arXiv:2502.15910, 2025. <span style="color:rgba(255,255,255,0.72)">[Online]</span>. Available: <a href="https://arxiv.org/abs/2502.15910" target="_blank" rel="noopener">arxiv.org/abs/2502.15910</a></li>
            <li>[5] H. Wang, X. Zhang, and D. Wang, “Attention-based fusion for bone-conducted and air-conducted speech enhancement in the complex domain,” in <i>ICASSP 2022—2022 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</i>. IEEE, 2022, pp. 7757–7761.</li>
            <li>[6] M. Wang, J. Chen, X. Zhang, Z. Huang, and S. Rahardja, “Multimodal speech enhancement with bone-conducted speech in time domain,” <i>Applied Acoustics</i>, vol. 200, p. 109058, 2022.</li>
            <li>[7] Y. Song, Y. Kim, and Y. Chung, “Lightweight speech enhancement model based on harmonic attention and phase estimation with skin-attachable accelerometer,” in <i>Proc. Interspeech</i>, 2025, pp. 66–70.</li>
          </ol>
        </div>
      </div>
    </section>

    <!-- Comparison Table note -->
    <section id="comparison">
      <div class="section-head">
        <div>
          <h2>Comparison Table</h2>
          <div class="hint">Audio + spectrogram (log-scale) comparisons</div>
        </div>
      </div>
      <div class="card">
        <div class="card-pad">
          <p>
            The spectrograms are log-scaled for visualization. All spectrogram thumbnails are rendered with a fixed size for consistent comparison.
            Click a spectrogram image to zoom in.
          </p>
        </div>
      </div>
    </section>

    <div id="sections"></div>

    <footer>
      <div>
        <b>Notes</b><br/>
        • “Noisy ACM” plays <code>*_noisy.wav</code> and shows <code>*_noisy.PNG</code> (fallback: <code>*_noisy.PNG</code>).<br/>
        • Clean spectrograms may not exist in your PNG folders; if missing, Clean image will be hidden.<br/>
        • GitHub Pages is case-sensitive: keep <code>.PNG</code> exactly as uploaded.
      </div>
    </footer>
  </div>

  <!-- Modal for zoom -->
  <div class="modal" id="modal" role="dialog" aria-modal="true">
    <div class="modal-inner">
      <div class="modal-bar">
        <div id="modalCaption">Spectrogram</div>
        <div class="modal-close" id="modalClose">Close</div>
      </div>
      <div class="modal-img-wrap">
        <img class="modal-img" id="modalImg" alt="Zoomed spectrogram" />
      </div>
    </div>
  </div>

  <script>
    /**
     * Put this index.html at repository root:
     *   - BASE should stay "" (empty)
     * If you put index.html inside /WAV, set:
     *   - const BASE = "..";
     */
    const BASE = ""; // "" when index.html is at repo root

    // Folder mapping (matches your uploaded structure)
    const MODELS = [
      { key: "DCCRN",  title: "Attention-based Early Fusion DCCRN", ref: "[5]",  wavDir: "WAV/DCCRN_wav",  specDir: "WAV/DCCRN_spectrogram" },
      { key: "MMINet", title: "MMINet",                               ref: "[6]",  wavDir: "WAV/MMINet_wav", specDir: "WAV/MMINet_spectrogram" },
      { key: "LAU-Net",title: "LAU-Net",                              ref: "[7]",  wavDir: "WAV/LAU-Net_wav",specDir: "WAV/LAU-Net_spectrogram" },
    ];

    // Samples (display name changed; file id stays the same)
    const SAMPLES = [
      { id: "p00_u32", label: "Sample A", display: "Male" },
      { id: "p24_u25", label: "Sample B", display: "Female" },
    ];

    // IMPORTANT: Do not change any wav/png filenames here (as requested)
    const COLS_TOP = [
      { name: "Noisy ACM",          wavSuffix: "_noisy.wav",  specSuffix: "_noisy.PNG",    specFallback: "_noisy.PNG" },
      { name: "BCM",               wavSuffix: "_bcm.wav",    specSuffix: "_bcm.PNG" },
      { name: "Clean ACM (Label)", wavSuffix: "_clean.wav",  specSuffix: "_acm.PNG",    specFallback: "_noisy.PNG" },
      { name: "CMC-ASP",           wavSuffix: "_CMCASP.wav", specSuffix: "_cmcasp.PNG", highlight: true },
    ];

    const COLS_BOTTOM = [
      { name: "PP [1]",   wavSuffix: "_PP.wav",   specSuffix: "_pp.PNG" },
      { name: "TP [2]",   wavSuffix: "_TP.wav",   specSuffix: "_tp.PNG" },
      { name: "BN [3]",   wavSuffix: "_BN.wav",   specSuffix: "_bn.PNG" },
      { name: "MANU [4]", wavSuffix: "_MANU.wav", specSuffix: "_manu.PNG" },
    ];

    const sectionsEl = document.getElementById("sections");
    const navEl = document.getElementById("navchips");
    const toggleSpec = document.getElementById("toggleSpec");
    const toggleLinks = document.getElementById("toggleLinks");

    // Modal
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const modalCaption = document.getElementById("modalCaption");
    const modalClose = document.getElementById("modalClose");

    function joinPath(...parts){
      const p = parts.filter(Boolean).join("/").replaceAll("//","/");
      return BASE ? `${BASE}/${p}` : p;
    }

    function makeNav(){
      const intro = [
        { text: "Introduction", href: "#introduction" },
        { text: "References", href: "#references" },
        { text: "Comparison", href: "#comparison" },
      ];
      intro.forEach(x => {
        const a = document.createElement("a");
        a.className = "chip";
        a.href = x.href;
        a.textContent = x.text;
        navEl.appendChild(a);
      });

      MODELS.forEach(m => {
        const a = document.createElement("a");
        a.className = "chip";
        a.href = `#${m.key.toLowerCase()}`;
        a.textContent = `${m.key} ${m.ref}`;
        navEl.appendChild(a);
      });
    }

    function createCell(model, sampleId, col){
      const cell = document.createElement("div");
      cell.className = "cell" + (col.highlight ? " highlight" : "");

      const wavPath = joinPath(model.wavDir, `${sampleId}${col.wavSuffix}`);
      const audio = document.createElement("audio");
      audio.controls = true;
      audio.preload = "none";
      audio.src = wavPath;
      cell.appendChild(audio);

      // Optional links (hidden by default)
      const link = document.createElement("a");
      link.className = "filelink filelink-wav";
      link.href = wavPath;
      link.textContent = "open wav";
      link.target = "_blank";
      link.rel = "noopener";
      link.style.display = "none";
      cell.appendChild(link);

      // Spectrogram
      if (col.specSuffix){
        const img = document.createElement("img");
        img.className = "spec";
        img.loading = "lazy";
        img.alt = `${model.key} ${sampleId} ${col.name} spectrogram`;

        const primary = joinPath(model.specDir, `${sampleId}${col.specSuffix}`);
        img.src = primary;

        // fallback if provided
        if (col.specFallback){
          const fallback = joinPath(model.specDir, `${sampleId}${col.specFallback}`);
          img.onerror = () => {
            if (img.src.endsWith(col.specSuffix)){
              img.src = fallback;
            } else {
              img.style.display = "none";
            }
          };
        } else {
          img.onerror = () => { img.style.display = "none"; };
        }

        img.addEventListener("click", () => {
          modalImg.src = img.src;
          modalCaption.textContent = `${model.title} ${model.ref} · ${sampleId} · ${col.name}`;
          modal.classList.add("open");
        });

        cell.appendChild(img);

        const link2 = document.createElement("a");
        link2.className = "filelink filelink-png";
        link2.href = primary;
        link2.textContent = "open png";
        link2.target = "_blank";
        link2.rel = "noopener";
        link2.style.display = "none";
        cell.appendChild(link2);
      } else {
        const note = document.createElement("div");
        note.style.fontSize = "11px";
        note.style.color = "rgba(255,255,255,0.55)";
        note.textContent = "Spectrogram: N/A";
        cell.appendChild(note);
      }

      return cell;
    }

    function buildModelSection(model){
      const section = document.createElement("section");
      section.id = model.key.toLowerCase();

      const head = document.createElement("div");
      head.className = "section-head";
      head.innerHTML = `
        <div>
          <h2>${model.title} <span style="color:rgba(255,255,255,0.75)">${model.ref}</span></h2>
          <div class="hint">Folder: <code>${model.wavDir}</code> &nbsp; | &nbsp; <code>${model.specDir}</code></div>
        </div>
        <div class="hint">Each sample is displayed in 2 rows (Top: Inputs/Label/Ours, Bottom: Baselines).</div>
      `;
      section.appendChild(head);

      const card = document.createElement("div");
      card.className = "card";

      const wrap = document.createElement("div");
      wrap.className = "table-wrap";

      const table = document.createElement("table");

      // header (2 header rows)
      const thead = document.createElement("thead");

      // row 1 header (top columns)
      const trH1 = document.createElement("tr");
      trH1.className = "cols";

      const th0 = document.createElement("th");
      th0.className = "sticky";
      th0.rowSpan = 2;
      th0.textContent = "Utterance";
      trH1.appendChild(th0);

      COLS_TOP.forEach(c => {
        const th = document.createElement("th");
        th.textContent = c.name;
        trH1.appendChild(th);
      });

      // row 2 header (bottom columns)
      const trH2 = document.createElement("tr");
      trH2.className = "cols2";

      COLS_BOTTOM.forEach(c => {
        const th = document.createElement("th");
        th.textContent = c.name;
        trH2.appendChild(th);
      });

      thead.appendChild(trH1);
      thead.appendChild(trH2);
      table.appendChild(thead);

      // body: each sample uses 2 rows (top/bottom)
      const tbody = document.createElement("tbody");

      SAMPLES.forEach((s, idx) => {
        const pairEven = (idx % 2 === 1); // alternate shading per sample-pair
        // row 1 (top)
        const tr1 = document.createElement("tr");
        if (pairEven) tr1.classList.add("pair-even");

        const td0 = document.createElement("td");
        td0.className = "sticky";
        td0.rowSpan = 2;

        // keep "Sample A" and "Male" as you want (two lines in the left cell)
        td0.innerHTML = `
          <div class="sample-id">${s.label}</div>
          <div class="sample-sub">${s.display}</div>
        `;
        tr1.appendChild(td0);

        COLS_TOP.forEach(c => {
          const td = document.createElement("td");
          td.appendChild(createCell(model, s.id, c));
          tr1.appendChild(td);
        });

        // row 2 (bottom)
        const tr2 = document.createElement("tr");
        if (pairEven) tr2.classList.add("pair-even");

        COLS_BOTTOM.forEach(c => {
          const td = document.createElement("td");
          td.appendChild(createCell(model, s.id, c));
          tr2.appendChild(td);
        });

        tbody.appendChild(tr1);
        tbody.appendChild(tr2);
      });

      table.appendChild(tbody);
      wrap.appendChild(table);
      card.appendChild(wrap);
      section.appendChild(card);

      return section;
    }

    function applyToggles(){
      // spectrogram show/hide
      document.querySelectorAll("img.spec").forEach(img => {
        img.style.display = toggleSpec.checked ? "" : "none";
      });

      // links show/hide
      const showLinks = toggleLinks.checked;
      document.querySelectorAll(".filelink").forEach(a => {
        a.style.display = showLinks ? "inline-block" : "none";
      });
    }

    // modal close behaviors
    modalClose.addEventListener("click", () => modal.classList.remove("open"));
    modal.addEventListener("click", (e) => {
      if (e.target === modal) modal.classList.remove("open");
    });
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape") modal.classList.remove("open");
    });

    // Init
    makeNav();
    MODELS.forEach(m => sectionsEl.appendChild(buildModelSection(m)));

    toggleSpec.addEventListener("change", applyToggles);
    toggleLinks.addEventListener("change", applyToggles);
    applyToggles();
  </script>
</body>
</html>
